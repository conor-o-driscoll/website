<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Conor O’Driscoll">
<meta name="dcterms.date" content="2025-09-18">
<meta name="description" content="Two salesmen selling identical products walk into a bar…they sit side-by-side">

<title>Hotelling’s Game – Conor O'Driscoll</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-9d882aefbe6880e209bb4e231fcedeb2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-E5KK0XXE44"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-E5KK0XXE44', { 'anonymize_ip': true});
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../include/webex.css">
<meta property="og:title" content="Hotelling’s Game – Conor O’Driscoll">
<meta property="og:description" content="Two salesmen selling identical products walk into a bar…they sit side-by-side">
<meta property="og:image" content="/img/beach.jpeg">
<meta property="og:site_name" content="Conor O'Driscoll">
<meta name="twitter:title" content="Hotelling’s Game – Conor O’Driscoll">
<meta name="twitter:description" content="Two salesmen selling identical products walk into a bar…they sit side-by-side">
<meta name="twitter:image" content="/img/beach.jpeg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Conor O’Driscoll</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../CV.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Publications and Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../teaching.html"> 
<span class="menu-text">Teaching Materials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html"> 
<span class="menu-text">News and Musings</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://twitter.com/conorodriscollx" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter-x"></i></a>
    <a href="https://www.linkedin.com/in/conor-o-driscoll-a0624a234/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://www.rug.nl/staff/c.odriscoll/?lang=en" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-building"></i></a>
    <a href="https://conor-o-driscoll.github.io/website/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-hotelling-location-game-when-businesses-cluster-and-why-it-matters" id="toc-the-hotelling-location-game-when-businesses-cluster-and-why-it-matters" class="nav-link active" data-scroll-target="#the-hotelling-location-game-when-businesses-cluster-and-why-it-matters">The Hotelling Location Game: When Businesses Cluster and Why It Matters</a></li>
  <li><a href="#the-mechanics-of-the-model" id="toc-the-mechanics-of-the-model" class="nav-link" data-scroll-target="#the-mechanics-of-the-model">The Mechanics of The Model</a></li>
  <li><a href="#implications-for-firm-locations" id="toc-implications-for-firm-locations" class="nav-link" data-scroll-target="#implications-for-firm-locations">Implications for Firm Locations</a></li>
  <li><a href="#playing-hotellings-game" id="toc-playing-hotellings-game" class="nav-link" data-scroll-target="#playing-hotellings-game">Playing Hotelling’s Game</a></li>
  <li><a href="#a-practical-example" id="toc-a-practical-example" class="nav-link" data-scroll-target="#a-practical-example">A Practical Example</a></li>
  <li><a href="#competing-on-prices" id="toc-competing-on-prices" class="nav-link" data-scroll-target="#competing-on-prices">Competing on Prices</a></li>
  <li><a href="#some-interesting-extensions" id="toc-some-interesting-extensions" class="nav-link" data-scroll-target="#some-interesting-extensions">Some Interesting Extensions</a></li>
  <li><a href="#wrapping-up" id="toc-wrapping-up" class="nav-link" data-scroll-target="#wrapping-up">Wrapping Up</a></li>
  <li><a href="#bibliography" id="toc-bibliography" class="nav-link" data-scroll-target="#bibliography">Bibliography</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Hotelling’s Game</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Economic Geography</div>
    <div class="quarto-category">Economic Modelling</div>
  </div>
  </div>

<div>
  <div class="description">
    Two salesmen selling identical products walk into a bar…they sit side-by-side
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Conor O’Driscoll </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 18, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="the-hotelling-location-game-when-businesses-cluster-and-why-it-matters" class="level1">
<h1>The Hotelling Location Game: When Businesses Cluster and Why It Matters</h1>
<p>In our previous posts, we have assumed that the market location is a single point in space. But this is not entirely realistic, as a market is much more than one single point; market areas frequently differ over space due to differences in population densities, differences in income distributions, and differences in consumer demand - just to name a few. Moreover, geography can confer monopoly power on firms, encouraging firms to engage in spatial competition such that they can acquire this monopoly power through locational behaviours.</p>
<p>In 1929, Harold Hotelling published a short but influential paper titled <em>“Stability in Competition”</em>. In it, he posed a deceptively simple question which provided a glimpse into how we might solve this problem: where should competing firms locate along a street to attract the most customers?</p>
</section>
<section id="the-mechanics-of-the-model" class="level1">
<h1>The Mechanics of The Model</h1>
<p>Imagine you have two firms, <em>A</em> and <em>B</em>, located at points <em>A</em> and <em>B</em> along a one-dimensional market area (i.e., a line) defined by <em>O</em> and <em>L</em>. Assume that both firms produce an identical product (e.g., ice-cream vendors at a beach). The production costs for both firms can be assumed to be the same, for the purpose of this post. We can also assume that transport costs rise as we get farther from each firm. For the sake of simplicity, we can also assume that the transport rates (i.e., the transport cost function) are identical for both firms.</p>
<p>Thus, for any location at a distance <span class="math display">\[d_a\]</span> away from firm <em>A</em>, the delivered price of the good (i.e., ice-cream) is given by <span class="math display">\[(p_a + t_ad_a)\]</span>. And for any location at a distance <span class="math display">\[d_b\]</span> from firm <em>B</em>, the delivered price of the good is given as <span class="math display">\[(p_b + t_bd_b)\]</span>.</p>
<p>If we assume that consumers (i.e., sunbathers / beach-goers) are evenly distributed along the line (i.e., beach), and we also assume that, consumers, being rational, will buy from the firm which is able to supply their good (i.e., ice-cream) at the lowest deliverable price, the total market area will be divided into 2 sectors, <em>OX</em> and <em>OL</em>.</p>
<p>The reason for this is that between points <em>O</em> and <em>X</em>, the delivered price for firm <em>A</em>, given as <span class="math display">\[(p_a + t_ad_a)\]</span>, is always lower than that of firm <em>B</em>. On the other hand, at all locations between <em>X</em> and <em>L</em>, the delivered price of firm <em>B</em>, given as <span class="math display">\[(p_b + t_bd_b)\]</span>, is always lower than that of firm <em>A</em>. You can see this more clearly in the below figure.</p>
<p><img src="../img/hotelling.jpeg" class="img-fluid"></p>
<p>Although firm <em>A</em> is more efficient than firm <em>B</em>, and although both firms produce an identical product, firm <em>A</em> does not capture all of the market because the transport costs associated with shipping goods to market locations close to firm <em>B</em> increase the delivered price to an noncompetitive level in locations close to firm <em>B</em>. In other words, firm <em>A</em> cannot capture all of firm <em>B</em>’s consumers because it is too far away.</p>
</section>
<section id="implications-for-firm-locations" class="level1">
<h1>Implications for Firm Locations</h1>
<p>Some other important implications arise from this model. Namely, the size of any firm’s market area will generally be larger the lower the production costs and the lower the transport rates are for the firm. In this sense, the existence of transport costs allows less efficient firms to survive by providing each firm with some monopoly power over particular market areas.</p>
<p>Location is an important way in which firms exercise monopoly power. If transport costs are a form of transaction costs, then we know (from the theory of the firm) that this can provide protection for inefficient firms as the costs of overcoming geography in order to conduct market exchanges become too large.</p>
<p>Firms which are located at great distances from each other, and which face significant transport costs will exhibit significant local spatial monopoly power. The existence of such power encourages firms to use location as a competitive weapon. This is particularly important in industries where firms do not compete primarily on price, but instead engage in non-price competition.</p>
</section>
<section id="playing-hotellings-game" class="level1">
<h1>Playing Hotelling’s Game</h1>
<p>In the simplest case of this, we can adapt the figure shown above so that both the production costs and transport rates of firm <em>A</em> and firm <em>B</em> are identical (i.e., <span class="math display">\[p_a = p_b\]</span> and <span class="math display">\[t_a = t_b\]</span>). We can further assume that these prices do not change, consumers are evenly distributed along <em>OL</em>, and make explicit the idea that the demand of consumers is perfectly inelastic (i.e., all consumers consume a fixed quantity per time period irrespective of price). Finally, each firm will base its decisions on the assumption that the other firm will not change its behaviour. In this specific sense, we can view Hotelling’s game as a game of sequential moves, where each player (firm) makes their decisions one-at-a-time.</p>
<p>Where does this leave us? Well, firms are not competing in terms of their production prices because they are assumed to be fixed. Each firm can only adjust its location to acquire greater market share. If the firms react to each other in sequential time periods, then the location game can be played.</p>
<p>The essence of the game plays out as follows:</p>
<p>If you assume that, along the line <em>OL</em>, one firm locates precisely in the middle of the half <em>OX</em> and the other firm locates precisely in the middle of the half <em>XL</em>, we see that straight away, both firms have monopoly power over 50% of the total market: <em>OX</em> is the territory of firm <em>A</em> while <em>XL</em> is the territory of firm <em>B</em>. This is the starting point of the game.</p>
<p>In pursuit of greater market share, firm <em>A</em> will want to move closer to firm <em>B</em>. In the extreme case, they might go so far as to move directly next to firm <em>B</em>. This can happen because all the customers to the left of firm <em>A</em> will always belong to firm <em>A</em>; thus, there is no risk of losing them by moving, there is only more to gain by capturing some of the market possessed by firm <em>B</em>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The same principle holds for firm <em>B</em>. The customers to their right will always belong to firm <em>B</em> because firm <em>A</em>, given its current location, cannot compete and capture these customers because firm <em>B</em> will always be closer.</p>
<p>Thus, at the first given opportunity, firm <em>B</em> will move leftwards.</p>
</div>
</div>
<p>In this example, firm <em>A</em> moves next door to firm <em>B</em>, and in doing so, captures the entirety of the market to its immediate left: firm <em>A</em> will always be closer to these customers than firm <em>B</em>. When it is firm <em>B</em>’s turn to “move”, firm <em>B</em> will act on similar incentives, and will thus move to the other side of firm <em>A</em>, therein swapping places (both locationally and in terms of market share) with firm <em>A</em>. These iterations repeat themselves until, eventually, both firms end up side-by-side at the midpoint of <em>OL</em>. At this point, greater market share cannot be acquired by any firm, meaning they stay put - concluding the game.</p>
<p>The core result of the Hotelling game for these two firms is that each will end up with precisely the same level of market share as they had in the beginning. But for consumers, quite a lot has changed. This result actually produces a fall in consumer welfare (relative to the starting point). How can we infer this? Recall that all consumers are assumed to consume a fixed quantity of goods per time-period and that there is no substitution possible. Therefore, the change in the delivered prices at each location will reflect the change in welfare of the consumer at each location.</p>
<p>This works out through two channels.</p>
<p>Firstly, the consumers located in-and-around the midpoint of <em>OL</em> benefit by generally reduced delivered prices, while those located closer to the edges stand to pay higher prices. The net effect of these welfare gains can be inferred in the below figure by examining the areas under the delivered price curves, which compare prices at the start (locations <em>A</em> and <em>B</em>) and at the end (location <em>X</em>) of the Hotelling game.</p>
<p><img src="../img/hotelling2.jpeg" class="img-fluid"></p>
<p>The bigger picture from this model appears to be that firms make more money, or at least charge higher prices once the game has been played out - creating a clear incentive to cluster when the conditions surrounding the game (i.e., assumptions about the nature of the competition between firm <em>A</em> and firm <em>B</em>) are realistic.</p>
<p>But in this situation, consumers stand to lose as the gains in welfare experienced by those fortunately located near the centre of the market does not appear to counter the welfare losses experienced by those closer to the edges.</p>
</section>
<section id="a-practical-example" class="level1">
<h1>A Practical Example</h1>
<p>Let’s see how we might represent this logic empirically using R. We can simulate a simple version of Hotelling’s game. Suppose we have a line from 0 to 1 (our “beach”), with 1000 customers uniformly spaced. Two firms choose positions along the line, and customers go to whichever is closer. We can then calculate each firm’s “market share” based on its location.</p>
<p>Here’s a small simulation to illustrate. First, we will create a seed so that each of you can replicate this result exactly, should you wish</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>From there, we will commence creating our market world. To do this, we need to construct a line on which <em>N</em> number of customers are evenly spread:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create 1000 evenly spaced customer locations</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>customers <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we can define where the firms are going to locate along this line. For the sake of illustration, lets first assume that firm <em>A</em> is at 25% of the line, while firm <em>B</em> is at 75%, as in the theoretical examples given above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Starting positions for the two firms</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>pos_A <span class="ot">&lt;-</span> <span class="fl">0.25</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>pos_B <span class="ot">&lt;-</span> <span class="fl">0.75</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we need a function that calculates market share. The idea is straightforward: each customer compares the distance to firm <em>A</em> and the distance to firm <em>B</em>, and chooses the closer one:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to compute market share for two firm positions</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#market_share &lt;- function(a, b) {</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  share_A &lt;- sum(abs(customers - a) &lt;= abs(customers - b)) / length(customers)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  share_B &lt;- 1 - share_A</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  c(A = share_A, B = share_B)</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#}</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>market_share <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  dA <span class="ot">&lt;-</span> <span class="fu">abs</span>(customers <span class="sc">-</span> a)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  dB <span class="ot">&lt;-</span> <span class="fu">abs</span>(customers <span class="sc">-</span> b)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  A_strict <span class="ot">&lt;-</span> <span class="fu">sum</span>(dA <span class="sc">&lt;</span> dB)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  B_strict <span class="ot">&lt;-</span> <span class="fu">sum</span>(dB <span class="sc">&lt;</span> dA)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  ties <span class="ot">&lt;-</span> <span class="fu">sum</span>(dA <span class="sc">==</span> dB)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  share_A <span class="ot">&lt;-</span> (A_strict <span class="sc">+</span> <span class="fl">0.5</span> <span class="sc">*</span> ties) <span class="sc">/</span> <span class="fu">length</span>(customers)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  share_B <span class="ot">&lt;-</span> (B_strict <span class="sc">+</span> <span class="fl">0.5</span> <span class="sc">*</span> ties) <span class="sc">/</span> <span class="fu">length</span>(customers)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="at">A =</span> share_A, <span class="at">B =</span> share_B)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Before doing anything else, let’s check the market share at the initial positions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">market_share</span>(pos_A, pos_B)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A   B 
0.5 0.5 </code></pre>
</div>
</div>
<p>At this stage, both firms have identical market shares as both capture precisely 50% of the market. If you want to create a deliberately assymetric starting point in this game, to see how it evolves under different conditions, all you need to do is change the values of <code>pos_A</code> and <code>pos_B</code> - but make sure both remain between 0 and 1.</p>
<p>In Hotelling’s logic, each firm asks: can I move a little and increase my market share? Thus commencing the game.</p>
<p>To simulate this behaviour, we will let firms adjust their positions step by step. At each step, each firm considers moving a tiny amount toward the middle of the line. If doing so improves its market share, it moves; if not, it stays put. This is not a formal solution algorithm — just an intuitive demonstration of how “creeping toward the centre” unfolds:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A simple iterative adjustment process</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>positions_over_time <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">step =</span> <span class="dv">0</span>, <span class="at">A =</span> pos_A, <span class="at">B =</span> pos_B)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#The number of steps indicates how many moves you think the game needs before it is complete</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(step <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>){ </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># A small movement step</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  epsilon <span class="ot">&lt;-</span> <span class="fl">0.01</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Try moving A slightly toward B</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  trial_A <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(pos_A <span class="sc">&lt;</span> pos_B, pos_A <span class="sc">+</span> epsilon, pos_A <span class="sc">-</span> epsilon)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">market_share</span>(trial_A, pos_B)[<span class="dv">1</span>] <span class="sc">&gt;</span> <span class="fu">market_share</span>(pos_A, pos_B)[<span class="dv">1</span>]){</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    pos_A <span class="ot">&lt;-</span> trial_A</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Try moving B slightly toward A</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  trial_B <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(pos_B <span class="sc">&gt;</span> pos_A, pos_B <span class="sc">-</span> epsilon, pos_B <span class="sc">+</span> epsilon)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">market_share</span>(pos_A, trial_B)[<span class="dv">2</span>] <span class="sc">&gt;</span> <span class="fu">market_share</span>(pos_A, pos_B)[<span class="dv">2</span>]){</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    pos_B <span class="ot">&lt;-</span> trial_B</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store positions</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  positions_over_time <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    positions_over_time,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">step =</span> step, <span class="at">A =</span> pos_A, <span class="at">B =</span> pos_B)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we can visualise how the firms moved over time. If Hotelling’s intuition is correct, both should march steadily toward the centre of the market.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(positions_over_time, <span class="fu">aes</span>(<span class="at">x =</span> step)) <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> A, <span class="at">colour =</span> <span class="st">"Firm A"</span>), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> B, <span class="at">colour =</span> <span class="st">"Firm B"</span>), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Firm A"</span> <span class="ot">=</span> <span class="st">"steelblue"</span>, <span class="st">"Firm B"</span> <span class="ot">=</span> <span class="st">"firebrick"</span>)) <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Simulated Adjustment in Hotelling’s Location Game"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Iteration step"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Firm location on the line"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"Firm"</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="hotelling_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="competing-on-prices" class="level1">
<h1>Competing on Prices</h1>
<p>The Hotelling result only holds as long as the firms do not compete in terms of prices. If price competition is possible, there is no Hotelling result.</p>
<p>The long-story-short about price wars in this context basically ends with firms sellling for zero profit while still being located at point <em>X</em>. In other words, price competition will drive prices down to the marginal costs of production, which is the typical equilibrium result in a competitive market.</p>
<p>The reason why this does not happen here is because this model is about monopoly power. Firms use locations as a means to generate greater monopoly power (i.e., market share) and they enhance their revenues by exploiting this power. Therefore, in situations where prices could spiral down, each firm will always have some incentive to move away such that they can retain parts of this power.</p>
<p>However, this creates a “Zugzwang” (to adopt the chess terminology) because neither firm has the incentive to move first. The firm which moves first is the firm which loses the largest market share - remember, they both take 50%! This makes a price war inevitable unless there is some mutual agreement made on the part of the firms.</p>
</section>
<section id="some-interesting-extensions" class="level1">
<h1>Some Interesting Extensions</h1>
<p>In industries where non-price competition dominates, prices are used to signal product quality, and to indicate the types of consumers for whom the good is intended. As such, prices tend to be fixed. Firms are unwilling to compete by lowering prices because this sends inappropriate signals to customers.</p>
<p>At the same time, engaging in non-price competition also implies that the products on offer are not identical, and therefore, you may question the relevance of the Hotelling result in the first place. However, as you will recognise from real-world experience, many of these so-called differences are in-fact quite superficial, involving primarily differences in packaging and appearance.</p>
<p>An interesting extension of the Hotelling model, which is a problem squarely concerned with geographical space, focuses on how these dynamics work across the product space (i.e., the variety of goods being sold). Digging into this problem specifically yields what is known as the Hotelling paradox; the idea that the mutual interdependence of firms often gives rise to firms producing basically identical products, selling them in the same place, while at the same time using non-price competition to make these products appear unique.</p>
<p>In these situations, firms will naturally tend to cluster together in space, and this is exactly how retail parks and central city shopping areas arise.</p>
<p>On the other hand, where firms produce identical products in which non-price competition is extremely difficult, such as the market for gasoline, firms will not cluster but instead opt for dispersion. Indeed, the oil companies which franchise or own gasoline stations will often agree not to co-locate too close to competitors in order to guarantee some market monopoly power for each station.</p>
</section>
<section id="wrapping-up" class="level1">
<h1>Wrapping Up</h1>
<p>The takeaway message from the Hotelling game is that competing firms will only locate next to each other in situations where price competition is ruled out by collusion or by other forms of non-price competition. Yet, in these types of non-price competitive situations, clustering is the norm.</p>
<p>Within this framework, there are two analytical conclusions:</p>
<p>First, spatial industrial clustering can arise naturally when price competition is not paramount. In these situations, the market will be split more-or-less equally between all firms in the cluster. For firms which produce more-or-less identical products for which non-price competition is extremely difficult, firms will be encouraged to disperse.</p>
<p>Second, consumers located close to the spatial cluster of firms will tend to experience a welfare gain relative to those located farther away. This is because the costs of consuming the goods increases with distance; thus, the prices will increase as you get farther away from the cluster.</p>
</section>
<section id="bibliography" class="level1">
<h1>Bibliography</h1>
<ol type="1">
<li>McCann, Philip. 2013. <em>Modern Urban and Regional Economics</em></li>
</ol>



</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2025, Conor O’Driscoll</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built with <img src="../img/r-logo.svg" style="vertical-align: middle; filter: grayscale(100%);" height="20"> and <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>